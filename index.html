<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Generador de numeros aleatorios</title>
    <link rel="stylesheet" href="css/style1.css" title="min-width:768px">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="countup.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.js" integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE=" crossorigin="anonymous"></script>
  </head>
  <body>
  <div class="container" name= "numeros">
    <center>
      <h1>Generador de números aleatorios</h1>
    <div class="row">
      <div class="col-md-12" >
      <p>Números Generados:</p>
    </div>
   </div>
   <div class="row" name="d1" id="generated">

   </div>
   <div class="row">
     <br>
     <div class="col-md-12">
       <input id="generar" type="submit" name="button" value="Generar" >
     </div>
   </div>
</div>

      <script type="text/javascript">

      var bolas = [
        {
          "id": "bola0",
          "min": 1,
          "max": 25,
          "title": "Texto",
        },
        {
          "id": "bola1",
          "min": 1,
          "max": 49,
          "title": "Texto",
        },
        {
          "id": "bola2",
          "min": 50,
          "max": 96,
          "title": "Texto",
        },
        {
          "id": "bola3",
          "min": 1,
          "max": 24,
          "title": "Texto",
        },
        {
          "id": "bola4",
          "min": 25,
          "max": 60,
          "title": "Texto",
        },
        // {
        //   "id": "bola5",
        //   "min": 1,
        //   "max": 2,
        //   "title": "Texto",
        // },

      ];

      //generar todos los div
      for (i=0;i<bolas.length;i++) {
        var col = jQuery('<div/>', {
          class:'col-md-4',
        });

        var bola = bolas[i];
        var bolaContainer = jQuery('<div/>', {
          id: bola["id"],
          class:'bola',
        });

        var title = jQuery('<p/>', {
          html: bola["title"],
          class:'bola-title'
        });


        $(col).append(title);

        $(col).append(bolaContainer);



        $("#generated").append(col);
      }

      //genera un numero aleatorio
        function getRand(selected, bola){
        var random = Math.round(Math.random()* (bola["max"] - bola["min"]) + bola["min"]);

          if (isInArray(selected, random)) {
            return getRand(selected, bola);
          }else {
          }
          return random;
        }

      //muestra los valores del array
        function isInArray(selected, random){
          var a = selected.indexOf(random);
            if (a==-1) {
              return false;
            }else{
              return true;
            }
          return a!=-1;
        }

      //escribe los valores del array en los campos de texto
        function writeValues(values){

          for (i = 0; i < bolas.length; i++) {

          var numero_aleatorios = values;
          $(bola["id"]).text(numero_aleatorios[i]);

        }
        }

        (function() {
          randomBalls();
          })();

      //escucha el evento de click y llama a las funciones una a una
        function randomBalls(){
          $('#generar').on('click', function (){

              valuesExists = [];
              balls = [];

              for (i=0; i<bolas.length; i++) {

                var bola = bolas[i];
                var maxBalls = bola["max"];
                var minBalls = bola["min"];

      //bucle que recorre maxBalls veces
                  randomValue = getRand(valuesExists, bola);
                  balls.push(randomValue);
                  valuesExists.push(randomValue);
              };
              //se acaba el bucle

              writeValues(balls);
              turnNumbers(balls);
         });
        }

      //crea un array igual a los de arriba y con la libreria count up crea el efecto de los numeros
        function turnNumbers(values){
          var turn = [];
          var timer = 0;

          var options = {
            useEasing : true,
            useGrouping : true,
            separator : ',',
            decimal : '.',
            prefix : '',
            suffix : ''
          };

          for (i = 0; i < bolas.length; i++) {
            timer+=2;
            turn.push(values[i]);
            var demo1 = new CountUp("bola"+i, 0, turn[i], 0, timer, options);
            demo1.start();
          }






          return turn;




      }

      </script>
  </body>
</html>
